## PIPENV
# PIPENV_DEFAULT_PYTHON_VERSION=/usr/local/bin/python3
# eval "$(pipenv --completion)"
# alias pact="source $(pipenv --venv)/bin/activate"

## PYENV
export PYENV_ROOT="$HOME/.pyenv"
if [[ -d $PYENV_ROOT ]];
then
    PATH="$PYENV_ROOT/bin:$PATH"
    # initialize pyenv
    eval "$(pyenv init -)"
fi

## Compiler flags for pyenv to discover homebrew's zlib, openssl, and readline
export LDFLAGS="-L/usr/local/opt/readline/lib -L/usr/local/opt/zlib/lib -L/usr/local/opt/openssl/lib"
export CPPFLAGS="-I/usr/local/opt/readline/include -I/usr/local/opt/zlib/include -I/usr/local/opt/openssl/include"
export PKG_CONFIG_PATH="$PKG_CONFIG_PATH:/usr/local/opt/zlib/lib/pkgconfig"

## only run pip if there is a virtualenv currently activated
export PIP_REQUIRE_VIRTUALENV=true
## enable global pip
gpip2() {
      PIP_REQUIRE_VIRTUALENV="" pip "$@"
}
gpip() {
    PIP_REQUIRE_VIRTUALENV="" pip3 "$@"
}

## FUNCTION FOR REMOVING PYTHON FILES
pyclean () {
      find . -type f -name "*.py[co]" -delete
      find . -type d -name "__pycache__" -exec rm -r {} +;
      find . -type d -name ".pytest_cache/" -exec rm -r {} +;
}

## FUNCTION FOR ACTIVATING VIRTUALENVS
workon () {
    source $HOME/.local/share/virtualenvs/$1/bin/activate
}

## FUNCTION FOR MAKING VIRTUALENVS
## example usage:
##     mkvenv .env 3.6.6
mkvenv () {
    if [ $# -ne 2 ]
    then
        echo "Expected arguments: venv_name python_version"
        echo "Available python versions:"
        pyenv versions
    else
        name=$1
        version=$2
        $PYENV_ROOT/versions/$version/bin/python -m venv $name
    fi
}

